<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© Ù„Ù„Ø§ÙØªØªØ§Ø­ÙŠØ§Øª</title>
    <style>
        :root { --bg: #121212; --card: #1e1e1e; --primary: #00b4d8; --text: #e0e0e0; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); padding: 20px; }
        .container { max-width: 900px; margin: auto; }
        .search-area { background: var(--card); padding: 25px; border-radius: 12px; position: sticky; top: 10px; z-index: 100; box-shadow: 0 8px 32px rgba(0,0,0,0.5); }
        input { width: 100%; padding: 15px; border-radius: 8px; border: 1px solid #333; background: #0a0a0a; color: white; box-sizing: border-box; font-size: 1.1rem; }
        .stats-bar { margin-top: 10px; font-size: 0.9rem; color: var(--primary); font-weight: bold; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 15px; margin-top: 25px; }
        .card { background: var(--card); border-radius: 10px; padding: 15px; border-bottom: 4px solid #333; transition: 0.3s; position: relative; overflow: hidden; }
        .card:hover { border-color: var(--primary); transform: translateY(-5px); }
        .card h3 { margin: 0 0 10px; font-size: 1rem; line-height: 1.4; color: #fff; }
        .moves { background: #000; padding: 10px; border-radius: 5px; color: #00f5d4; font-family: 'Courier New', monospace; font-size: 0.9rem; display: block; margin-top: 10px; }
        .eco-tag { position: absolute; top: 10px; left: 10px; background: #333; font-size: 0.7rem; padding: 2px 6px; border-radius: 4px; }
        .btn-copy { margin-top: 15px; width: 100%; padding: 8px; background: #2a2a2a; border: none; color: white; cursor: pointer; border-radius: 5px; }
        .btn-copy:hover { background: #3d3d3d; }
    </style>
</head>
<body>

<div class="container">
    <div class="search-area">
        <h1>ğŸ” Ø§Ù„Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© Ù„Ù„Ø§ÙØªØªØ§Ø­ÙŠØ§Øª</h1>
        <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§ÙØªØªØ§Ø­ÙŠØ© (Ù…Ø«Ù„Ø§Ù‹: Sicilian Ø£Ùˆ d4 d5)..." oninput="handleSearch()">
        <div id="status" class="stats-bar">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©...</div>
    </div>

    <div id="grid" class="grid"></div>
</div>

<script>
    let db = [];
    let filtered = [];

    // Ø§Ù„Ø±Ø¨Ø· Ø¨Ù…ÙƒØªØ¨Ø© Ø¹Ø§Ù„Ù…ÙŠØ© Ù…ÙØªÙˆØ­Ø© Ø§Ù„Ù…ØµØ¯Ø± Ø¹Ø¨Ø± CDN (ØªØ¬Ø§ÙˆØ² CORS)
    async function initDB() {
        const status = document.getElementById('status');
        try {
            // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø±Ø§Ø¨Ø· CDN Ù„Ù…Ù„Ù JSON Ø¹Ø§Ù„Ù…ÙŠ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¢Ù„Ø§Ù Ø§Ù„Ø§ÙØªØªØ§Ø­ÙŠØ§Øª
            const url = 'https://cdn.jsdelivr.net/gh/niklasf/chess-openings@master/dist/openings.json';
            const response = await fetch(url);
            db = await response.json();
            
            status.innerText = `âœ… Ù…ØªØµÙ„ Ø¨Ù†Ø¬Ø§Ø­: ØªÙ… Ø¬Ù„Ø¨ ${db.length} Ø§ÙØªØªØ§Ø­ÙŠØ© Ù…Ù† Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©.`;
            filtered = db.slice(0, 50); // Ø¹Ø±Ø¶ Ø£ÙˆÙ„ 50 ÙÙ‚Ø· Ù„Ù„Ø³Ø±Ø¹Ø©
            render();
        } catch (e) {
            status.innerText = "âŒ ÙØ´Ù„ Ø§Ù„Ø±Ø¨Ø· Ø¨Ø§Ù„Ù…ÙƒØªØ¨Ø©. Ø¬Ø±Ø¨ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©.";
            console.error(e);
        }
    }

    function handleSearch() {
        const query = document.getElementById('searchInput').value.toLowerCase().trim();
        if (query === "") {
            filtered = db.slice(0, 50);
        } else {
            // Ø¨Ø­Ø« Ø°ÙƒÙŠ ÙÙŠ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ÙˆØ§Ù„Ù†Ù‚Ù„Ø§Øª Ù…Ø¹Ø§Ù‹
            filtered = db.filter(item => 
                item.name.toLowerCase().includes(query) || 
                item.pgn.toLowerCase().includes(query)
            ).slice(0, 50);
        }
        render();
    }

    function render() {
        const grid = document.getElementById('grid');
        grid.innerHTML = filtered.map(item => `
            <div class="card">
                <span class="eco-tag">${item.eco}</span>
                <div style="margin-top: 15px;">
                    <h3>${item.name}</h3>
                    <code class="moves">${item.pgn}</code>
                    <button class="btn-copy" onclick="copyMoves('${item.pgn}', this)">Ù†Ø³Ø® Ø§Ù„Ù†Ù‚Ù„Ø§Øª</button>
                </div>
            </div>
        `).join('');
    }

    function copyMoves(text, btn) {
        navigator.clipboard.writeText(text);
        const originalText = btn.innerText;
        btn.innerText = "ØªÙ… Ø§Ù„Ù†Ø³Ø®! âœ“";
        setTimeout(() => btn.innerText = originalText, 1000);
    }

    initDB();
</script>

</body>
</html>
